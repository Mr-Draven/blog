webpackJsonp([1],{"4PSc":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=i("VU/8")({name:"App"},a,!1,function(t){i("lBFV")},null,null).exports,o=i("/ocq"),l=i("TCmZ"),r=i.n(l),c={name:"Preview",data:function(){return{htmlContent:'<div style="font-size: 28px;font-family: \'Times New Roman\'" align="center">Welcome</div>',isEdit:!1,openStr:"preview",mdContent:"",mdContentPre:"",isInit:!0,titleOptions:[],currentTitle:""}},methods:{fetchInitContent:function(t){var e=this;this.axios.get("/api/getTitleOptions?classify="+t).then(function(t){e.titleOptions=t.data.titleOptions})},changeSwitch:function(){""!=this.currentTitle&&("preview"==this.openStr?this.openStr="edit":(this.openStr="preview",this.save(this.mdContent,null)))},save:function(t,e){if(this.mdContentPre!=t){var i=this,n={title:this.currentTitle,content:t},a=r.a.stringify(n);this.axios.post("/api/storeContent",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"ok"==e.data&&(i.$message({type:"success",message:"文件已经保存!"}),i.mdContentPre=t)})}},contentChange:function(t,e){this.mdContent=t,this.isInit&&(this.mdContentPre=t,this.isInit=!1)},fetchArticle:function(t){var e=this;this.axios.get("/api/fetchArticle?title="+t).then(function(i){"ok"==i.data.status&&(e.htmlContent=i.data.article,e.currentTitle=t)})}},mounted:function(){var t=this.$store.state.classify;this.fetchInitContent(t),this.currentTitle=""}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"left",attrs:{align:"center"}},t._l(t.titleOptions,function(e){return i("ul",{attrs:{title:e.title}},[i("a",{attrs:{href:"#"},on:{click:function(t){}}},[t._v(t._s(e.title))]),t._v(" "),t._l(e.subtitle,function(e){return i("li",[i("a",{attrs:{href:"#"},on:{click:function(i){return t.fetchArticle(e)}}},[t._v(t._s(e))])])})],2)}),0),t._v(" "),i("div",{staticClass:"right",attrs:{id:"content",align:"left"}},[i("el-switch",{staticStyle:{"margin-bottom":"2%"},attrs:{"active-text":"编辑"},on:{change:t.changeSwitch},model:{value:t.isEdit,callback:function(e){t.isEdit=e},expression:"isEdit"}}),t._v(" "),i("mavon-editor",{staticClass:"md",attrs:{value:t.htmlContent,subfield:!1,defaultOpen:t.openStr,toolbarsFlag:!1,editable:!0,scrollStyle:!0,ishljs:!0,codeStyle:"rainbow",previewBackground:"#ffffff"},on:{save:t.save,change:t.contentChange}})],1)])},staticRenderFns:[]};var d=i("VU/8")(c,u,!1,function(t){i("m+5R")},"data-v-051a6209",null).exports,f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{align:"center"}},[e("div",{staticClass:"top",attrs:{align:"center"}},[e("el-menu",{staticClass:"el-menu-demo",staticStyle:{width:"140px"},attrs:{"default-active":this.activeIndex,mode:"horizontal"},on:{select:this.handleSelect}},[e("el-menu-item",{attrs:{index:"1"}},[this._v("主页")]),this._v(" "),e("el-menu-item",{attrs:{index:"2"}},[this._v("新增")])],1)],1),this._v(" "),e("div",{staticClass:"bottom"},[e("router-view")],1)])},staticRenderFns:[]};var h=i("VU/8")({name:"Dashboard",data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(t,e){1==t?"/navigator"!=this.$route.path&&this.$router.push("/navigator"):2==t&&"/addPage"!=this.$route.path&&this.$router.push("/addPage")}},mounted:function(){this.$router.push("/navigator")}},f,!1,function(t){i("ZV50")},"data-v-0b0f9e17",null).exports,p={name:"AddPage",data:function(){return{mdContent:"",mainTitle:"",mainTitleOptions:[],subTitle:"",subTitleOptions:[],title:""}},methods:{contentChange:function(t,e){this.mdContent=t},storeArticle:function(){if(""==this.mdContent);else if(""==this.mainTitle)this.failMessage("错误,分类不能为空");else if(""==this.subTitle)this.failMessage("错误,主标题不能为空");else if(""==this.title)this.failMessage("错误,文章题目不能为空");else{var t={content:this.mdContent,classify:this.mainTitle,subtitle:this.subTitle,title:this.title},e=r.a.stringify(t),i=this;this.axios.post("/api/addArticle",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){"ok"==t.data?i.successMessage("文章保存成功!",i):i.failMessage("网络发生错误,请稍后重试!")})}},failMessage:function(t){this.$message({type:"error",message:t})},successMessage:function(t,e){e.$message({type:"success",message:t})},getSubtitle:function(){var t=this;console.log(t.subTitleOptions),this.axios.get("/api/getAddPageSubtitleInfo?classify="+this.mainTitle).then(function(e){"ok"==e.data.status&&(t.subTitleOptions=e.data.subtitle,t.$forceUpdate(t.subTitleOptions))})}},mounted:function(){var t=this;this.axios.get("/api/getAddPageInitInfo").then(function(e){"ok"==e.data.status&&(t.mainTitleOptions=e.data.classify)})}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"top",attrs:{align:"center"}},[i("el-select",{staticStyle:{width:"150px"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"分类"},on:{change:t.getSubtitle},model:{value:t.mainTitle,callback:function(e){t.mainTitle=e},expression:"mainTitle"}},t._l(t.mainTitleOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),i("el-select",{staticStyle:{width:"150px"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"主标题"},model:{value:t.subTitle,callback:function(e){t.subTitle=e},expression:"subTitle"}},t._l(t.subTitleOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),i("el-input",{staticStyle:{width:"200px"},attrs:{type:"primary",placeholder:"请输入的文章的名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.storeArticle}},[t._v("保存")])],1),t._v(" "),i("div",{staticClass:"bottom"},[i("mavon-editor",{staticClass:"md",attrs:{subfield:!0,defaultOpen:"preview",toolbarsFlag:!0,editable:!0,scrollStyle:!0,ishljs:!0,codeStyle:"rainbow",previewBackground:"#ffffff"},on:{change:t.contentChange},model:{value:t.mdContent,callback:function(e){t.mdContent=e},expression:"mdContent"}})],1)])},staticRenderFns:[]};var m=i("VU/8")(p,v,!1,function(t){i("OdAa")},"data-v-322d69f2",null).exports,g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",attrs:{align:"left"}},t._l(t.options,function(e,n){return i("div",{key:n,staticClass:"card",style:{backgroundColor:t.color[n]},attrs:{align:"center"},on:{click:function(i){return t.toPreview(e.value)}}},[i("span",{staticStyle:{display:"inline-block",width:"100%",height:"20%"}},[t._v(t._s(e.value))])])}),0)},staticRenderFns:[]};var b=i("VU/8")({name:"NavigationPage",data:function(){return{options:[],color:["#67C23A","#E6A23C","#F56C6C","#409EFF","#faecd8","#FDE6E0","#DCE2F1","#ecccb3","#22c8b2","#c3ecee","#bcefd0","#a1e8e4","#fe6471","#daf1ef","#019875","#DDF3FF"]}},methods:{toPreview:function(t){this.$store.commit("setClassify",t),this.$router.push("/preview")}},mounted:function(){var t=this;this.axios.get("/api/dashboard").then(function(e){"ok"==e.data.status&&(t.options=e.data.options)})}},g,!1,function(t){i("4PSc")},"data-v-c3a55e28",null).exports;n.default.use(o.a);var C=new o.a({routes:[{path:"/",name:"Dashboard",component:h,children:[{path:"/preview",name:"Preview",component:d},{path:"/addPage",name:"addPage",component:m},{path:"/navigator",name:"NavigationPage",component:b}]}]}),w=i("C6wW"),y=i.n(w),_=i("66Q7"),T=i.n(_),x=i("gU9C"),S=i.n(x),k=(i("b6Kr"),i("J4Ko")),P=i.n(k),O=(i("bZrT"),i("fUgm"));n.default.use(P.a),n.default.config.productionTip=!1,n.default.use(T.a,y.a),n.default.use(S.a),n.default.use(O.a);var F=new O.a.Store({state:{classify:""},mutations:{setClassify:function(t,e){t.classify=e}}});new n.default({el:"#app",router:C,store:F,components:{App:s},template:"<App/>"})},OdAa:function(t,e){},ZV50:function(t,e){},b6Kr:function(t,e){},bZrT:function(t,e){},lBFV:function(t,e){},"m+5R":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ffa97aff4525bd195f1c.js.map